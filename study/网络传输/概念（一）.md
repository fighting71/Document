
**网络中的信息是如何交互的？**

  网络中的信息交互即为网络传输，双方通过特殊的管道(网络协议)发送/接收数据.

**为什么需要管道？不能直接发送/接收？**

  如同人与人之间相互交流是需要遵循一定的规矩一样，计算机之间的相互通信需要共同遵守一定的规则，这些规则就称为网络协议。

**什么是网络传输协议**

  通讯协议又称通信规程，是指通信双方对数据传送控制的一种约定。约定中包括对数据格式，同步方式，传送速度，传送步骤，检纠错方式以及控制字符定义等问题做出统一规定，通信双方必须共同遵守，它也叫做链路控制规程。

  [wiki参考](https://zh.wikipedia.org/wiki/%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE)

**协议有什么区别？如何区分协议？**

[wiki OSI模型](https://zh.wikipedia.org/wiki/OSI%E6%A8%A1%E5%9E%8B)

### OSI模型 ###

  开放式系统互联模型（英语：Open System Interconnection Model，缩写：OSI；简称为OSI模型）是一种概念模型，由国际标准化组织提出，一个试图使各种计算机在世界范围内互连为网络的标准框架。定义于ISO/IEC 7498-1。

### 历史 ###

  在制定计算机网络标准方面，起着重大作用的两大国际组织是：国际电信联盟电信标准化部门，与国际标准组织（ISO），虽然它们工作领域不同，但随着科学技术的发展，通信与信息处理之间的界限开始变得比较模糊，这也成了国际电信联盟电信标准化部门和ISO共同关心的领域。1984年，ISO发布了著名的ISO/IEC 7498标准，它定义了网络互联的7层框架，也就是开放式系统互联参考模型。

根据建议X.200，OSI将计算机网络体系结构划分为以下七层

# 一、物理层 #

[wiki 物理层](https://zh.wikipedia.org/wiki/%E7%89%A9%E7%90%86%E5%B1%82)

> 物理层(Physical Layer) 在局部局域网上传输数据帧(Data Frame),它负责管理电脑通信设备和网络媒体之间的互通。包括了针脚、电压、线缆规范、集线器、中继器、网卡、主机接口卡等。

> 网络的物理层面确保原始的数据可以在各种物理媒体上传输。
> 物理层规定：为传输数据，需要物理链路与设备的创建、维持、拆除，并具有机械的、电子的、功能的、规范的特性。

*局域网与广域网皆属于第1、2层*

## 物理层功能 ##

1. 为数据端设备提供传送数据通路
2. 传送数据

## 常见物理层设备 ##

- 网卡
- 光纤
- CAT-5线
- RJ-45接头
- 集线器有整波作用。
- Repeater加强信号
- 串口
- 并口

## 物理层协议 ##

略..

# 二、数据链接层 #

> 数据链路层(Data Link Layer) 负责**网络寻址**、**错误侦测**和**改错**。当表头和表尾被加至数据包时，会形成信息框(Data Frame)。**数据链表头**(DLH)是**包含了物理地址和错误侦测及改错的方法**。**数据链表尾**(DLT) 是**一串指示数据包末端的字符串**。例如以太网、无线局域网(Wi-Fi) 和通用分组无线服务(GPRS)等。

> 分为两个子层：逻辑链路控制(logical link control, LLC) 子层和介质访问控制(Media access control,MAC) 子层。

[wiki 数据链路层](https://zh.wikipedia.org/wiki/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82)

> **数据链路层**(Data Link Layer) 是OSI参考模型第二层，位于**物理层与网络层**之间。在广播式多路访问链路中(局域网)，由于可能存在介质争用，它还可以细分为**介质访问控制**(MAC) 子层和**逻辑链路控制**(LLC)子层，**介质访问控制**(MAC) 子层专职处理介质访问的争用与冲突问题。

*局域网与广域网皆属于第1、2层*

## 主要功能 ##

在两个网络实体之间提供数据链路连接的创建、维持和释放管理。构成数据链路数据单元(frame:数据帧)，并对帧定界、同步、收发顺序的控制。传输过程中的网络流量控制、差错检测和差错控制等方面。

只提供导线的一端到另一端的数据传输。

数据链路层会在frame 尾端置放检查码(parity, sum, CRC) 以检查实质内容，将物理层提供的可能出错的物理连接改造成逻辑上无差别的数据链路，并对物理层的原始数据进行数据封装。

数据链路层中的数据封装是指：封装的数据信息中，包含了地址段和数据段等。地址段含有点对点发送节点和接收节点的地址(如MAC),控制段用来表示数格连接帧的类型，数据段包含实际要传输的数据。

# 三、网络层 #

> 网络层(Network Layer) 决定数据的路径选择和转寄，将网格表头(NH)加至数据包，以形成报文。网络表头包含了网络数据。例如：互联网协议(IP)等。

[wiki 网络层](https://zh.wikipedia.org/wiki/%E7%BD%91%E7%BB%9C%E5%B1%82)

> **网络层**(Network Layer)是OSI模型中的第三层(TCP/IP模型中的网际层)，提供路由和寻址的功能，使两终端系统能够互连且决定最佳路径，并具有一定的拥塞控制和流量控制的能力。相当于发送邮件时需要地址一般重要。由于TCP/IP协议体系中的网络层功能能由IP协议规定和实现，故又称IP层。

## 功能 ##

**寻址**

对网络层而言使用IP地址来唯一标识互联网上的设备，网络层依靠IP地址进行相互通信(类似于数据链路层的MAC地址)，详细的编址方案参见IPv4和IPv6

**路由**

在同一个网络中的内部通信并不需要网络层设备，仅仅靠数据链路层就可以完成相互通信，对于不同的网络之间相互通信则必须借助路由器等三层设备。

# 四、传输层 #

> 传输层(Transport Layer) 把传输表头(TH)加至数据以形成数据包。传输表头包含了所使用的协议等发送信息。例如：传输控制协议(TCP)等。

[wiki 传输层](https://zh.wikipedia.org/wiki/%E4%BC%A0%E8%BE%93%E5%B1%82)

> **传输层**(Transport Layer) 在计算机网络中是互联网协议包与开放系统互连(OSI)网络堆栈中协议的分层结构中的方法的一个概念划分。该层的协议为应用进程提供端到端的通信服务。它提供**面向连接的数据流支持、可靠性、流量控制、多路复用**等服务。

> 互联网与一般性网络的开放系统互连OSI模型的基础，TCP/IP模型的传输层的具体实现和含义是不同的。在OSI模型中传输层最常被称作第四层或L4,而TCP/IP中不常给网络层编号。

> 最著名的TCP/IP传输协议是**传输控制协议**(TCP),它的名称借用自整个包的名称。它用于面向连接的传输，而无连接的**用户数据报协议**(UDP)用于简单消息传输。TCP是更复杂的协议，因为它的状态性设计结合了可靠传输和数据流服务。这个协议组中其他重要协议有**数据拥塞控制协议**(DCCP)与**流控制传输协议**(SCTP)

## 服务 ##

传输层服务通过传输层协议的编程接口传递给应用进程。该服务包括以下功能：

- **连接导向式通信**：通过对于一个应用进程来说，把连接解读为数据流而非处理底层的无连接模型(如用户数据报协议(UDP)与网际协议(IP)的数据包模型)更加容易
- **相同次序交付**：网络层通常不保证数据包到达顺序与发送顺序相同，但这往往是一个可取的特点。这通常是通过给报文段编号来完成的，接收者按次序将它们传给应用进程。这可能会造成队头阻塞。
- **可靠性**：由于网络拥塞和错误，数据包可能在传输过程中丢失。通过检错码(如效验和)，传输协议可以检查数据是否损坏，并通过向发送者传ACK或NACK消息确认正确接收。自动重发请求方案可用于重新传输丢失或损坏的数据。
- **流量控制**：有时必须控制两个节点之间的数据传输速率以阻止快速的发送者传输超出接收缓冲器所能承受的数据，造成缓冲区溢出。这也可以通过减少缓冲区不足来提高效率。
- **拥塞避免**：拥塞控制可以控制进入到电信网络的流量。
- **多路复用**：端口可以在单个节点上提供多个端点。例如，邮政地址的名称是一种多路复用，并区分同一位置的不同收件人。每个计算机应用进程会监听他们自己的端口，这使得在同一时间可以使用多个网络服务。它是在TCP/IP模型中是传输层的一部分，但在OSI模型中属于会话层。


# 会话层 #

> 会话层(Session Layer) 负责在数据传输中设置和维护电脑网络中两台电脑之间的通信连接。

[wiki 会话层](https://zh.wikipedia.org/wiki/%E4%BC%9A%E8%AF%9D%E5%B1%82)

> **会话层**,位于OSI模型的第5层，主要为两个会话层实体进行会话(Session) ,而进行的对话连接的管理服务。
> 会话层为客户端的应用程序提供了打开、关闭和管理会话的机制，亦即半永久的对话。会话的实体包含了对其他程序作会话链接的要求及回应其他程序提出的会话链接要求。在应用程序的运行环境中，会话层是这些程序用来提出**远程过程调用**(remote procedure calls, RPC) 的地方。
> 会话层标准为了使会话连接创建阶段能进行功能协商，也为了便于其他国际标准参考和引用，定义了12种功能单元。各个系统可根据自身情况和需要，以核心功能服务单元为基础，选配其他功能单元组成合理的会话服务子集。

## 会话层服务 ##

- 认证(Authentication)
- 权限(Permissions)
- 会话恢复(Session restoration):包括检查点(checkpointing)和恢复(recovery)

会话层在OSI的模型负责会话检查点和恢复。它允许不同来源的信息流作适当的合并或同步化。

一个例子是在网络会议的应用，其中音频和视频的流串必须同步，以避免嘴唇与声音不同步的问题。楼层控制确保在屏幕上显示的是当前的发言者。

另一个应用是在电视直播节目中，在那里音频和视频的流串从一个到另一个合并或转换时要无缝，以免出现无声通话时间或过度重叠。

## 会话层的主要功能 ##

1. 为会话实体间创建连接：为给两个对等会话服务用户创建一个会话连接，应该做如下几项工作。
	1. 将会话地址映射为运输地址。
	2. 选择需要的运输服务质量参数(QOS)。
	3. 对会话参数进行协商。
	4. 识别各个会话连接。
	5. 传送有限的透明用户数据。
2. 数据传输阶段：这个阶段是在两个会话用户之间实现有组织的，同步的数据传输。用户数据单元为SSDU，而协议数据单元为SPDU.会话用户之间的数据传送过程是将SSDU转变成SPDU进行的。
3. 连接释放：连接释放是通过“有序释放”，“废弃”，“有限量透明用户数据传送”等功能单元来释放会话连接的。

# 表达层 #

> 表达层(Persentation Layer) 把数据转换为能与接收者的系统格式兼容并适合传输的格式。

[wiki 表示层](https://zh.wikipedia.org/wiki/%E8%A1%A8%E7%A4%BA%E5%B1%82)

> **表示层**(Presentation)亦称**表达层**为不同终端的上层用户提供数据和信息正确的语法表示变换方法。如文本文件的ASCII格式和EBCDIC,用于表示数字的反码或补码表示形式。

## 表示层的主要功能 ##

- 数据语法转换
- 语法表示
- 连接管理
- 数据处理
	- 数据加密和解密
	- 数据压缩和解压
	- 数据编码和解码

# 应用层 #

> 应用层(Application Layer) 提供为应用软件而设的接口，以设置与另一应用软件之间的通信。例如:HTTP、HTTPS、FTP、TELNET、SSH、SMTP、POP3、HTML等。

[wiki 应用层](https://zh.wikipedia.org/wiki/%E5%BA%94%E7%94%A8%E5%B1%82)

> **应用层(Application Layer)** 位于OSI模型的第七层。应用层直接和应用程序接口结合，并提供常见的网络应用服务。应用层也向第六层表示层发出请求。