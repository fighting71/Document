
> **索引**是帮助MySQL/Sqlserver高效获取数据的**排好序**的**数据结构**

## binary search tree ##

二叉树存储示例：

![示例图](https://i.ibb.co/wQKzW02/binary-search-tree.png)

结论：当数据为递增时，树结构具体表现类似于链表结构，当查找的数据在比较后面的节点时，会查找多次 

即 二叉树容易导致高度增大，会增加查找磁盘IO频率(例如：在插入递增时会退化为链表)

如何避免退化为链表？

## red/black tree ##

红黑树存储示例：

![示例图](<a href="https://imgbb.com/"><img src="https://i.ibb.co/RpwfDK9/red-black-tree.png" alt="red-black-tree" border="0"></a>)

好处：

  会自动支持平衡旋转

劣势：

  当数据量较大时，依然会导致高度很高，从而导致有些数据的获取会频繁IO

如何降低树的高度？

 既然要高度低，又要存储的数据多，那么为什么不在一个节点中存储多个索引呢

既然一个节点可以存储多个索引，为什么不在一个节点中存储所有索引？

 当数据过多时，节点占用空间较大，为了获取一个数据，加载几G数据不划算。

## b tree ##

略

## b+ tree ##

*叶子节点：无子节点的节点*

多叉平衡树

与b tree的区别：
 
- 非叶子节点不存储data,只存储索引(冗余),可以放更多的索引

- 叶子节点包含所有索引字段(在mysql中 不同数据引擎，存储方式有所不同 所有字段/数据指针(参考回表))

- 叶子节点用指针连接，提高区间访问的性能。

为什么b+ tree 要把数据移到叶子节点上？

  1.方便范围查询

  2.让非叶子节点存储更多的索引，降低树的高度。

**聚集索引vs非聚集索引**

聚集索引的叶子节点存储了索引和数据

而非聚集索引的叶子节点仅存储索引和对应数据的地址

## 联合/组合索引 ##

**联合索引与单一索引**

用3个列创建联合索引是否等价于在3个列上单独创建索引？

  否，**如果你有三个单列的索引，MySQL会试图选择一个限制最严格的索引。但是，即使是限制最严格的单列索引，它的限制能力也肯定远远低于firstname、lastname、age这三个列上的多列索引。**

当我们有一个firstname、lastname、age列上的多列索引，我们称这个索引为fname_lname_age。它相当于我们创建了(firstname，lastname，age)、(firstname，lastname)以及(firstname)这些列组合上的索引。

"最左前缀":从最左面的开始组合。	

**故：在使用联合索引时，为避免全表扫描，需要注意最左前缀的条件**

在创建索引时，尽量使用自增列(避免分叉，参考b+ tree 添加)